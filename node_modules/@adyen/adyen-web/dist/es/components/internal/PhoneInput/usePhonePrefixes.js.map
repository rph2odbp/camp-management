{"version":3,"file":"usePhonePrefixes.js","sources":["../../../../../src/components/internal/PhoneInput/usePhonePrefixes.ts"],"sourcesContent":["import { useLayoutEffect, useState } from 'preact/hooks';\nimport getDataset from '../../../core/Services/get-dataset';\nimport { DataSet } from '../../../core/Services/data-set';\nimport { PhonePrefixes } from './types';\nimport AdyenCheckoutError from '../../../core/Errors/AdyenCheckoutError';\n\nfunction usePhonePrefixes({ allowedCountries, loadingContext, handleError }): PhonePrefixes {\n    const [loadingStatus, setLoadingStatus] = useState<string>('loading');\n    const [phonePrefixes, setPhonePrefixes] = useState<DataSet>([]);\n\n    useLayoutEffect(() => {\n        getDataset('phonenumbers', loadingContext)\n            .then(response => {\n                const countriesFilter = country => allowedCountries.includes(country.id);\n                const filteredCountries = allowedCountries.length ? response.filter(countriesFilter) : response;\n                const mappedCountries = filteredCountries.map(({ prefix, id }) => ({\n                    id: prefix,\n                    name: `${prefix} (${id})`,\n                    selectedOptionName: prefix\n                }));\n\n                setPhonePrefixes(mappedCountries || []);\n                setLoadingStatus('ready');\n            })\n            .catch(error => {\n                setPhonePrefixes([]);\n                setLoadingStatus('ready');\n                handleError?.(new AdyenCheckoutError('ERROR', error));\n            });\n    }, []);\n\n    return { phonePrefixes, loadingStatus };\n}\n\nexport default usePhonePrefixes;\n"],"names":["usePhonePrefixes","allowedCountries","loadingContext","handleError","loadingStatus","setLoadingStatus","useState","phonePrefixes","setPhonePrefixes","useLayoutEffect","getDataset","then","response","mappedCountries","length","filter","country","includes","id","map","prefix","name","selectedOptionName","catch","error","AdyenCheckoutError"],"mappings":"4MAMA,SAASA,GAAiBC,iBAAEA,EAAgBC,eAAEA,EAAcC,YAAEA,IAC1D,MAAOC,EAAeC,GAAoBC,EAAiB,YACpDC,EAAeC,GAAoBF,EAAkB,IAuB5D,OArBAG,EAAgB,KACZC,EAAW,eAAgBR,GACtBS,KAAKC,IACF,MAEMC,GADoBZ,EAAiBa,OAASF,EAASG,OADrCC,GAAWf,EAAiBgB,SAASD,EAAQE,KACkBN,GAC7CO,IAAI,EAAGC,SAAQF,SAAI,CACzDA,GAAIE,EACJC,KAAM,GAAGD,MAAWF,KACpBI,mBAAoBF,KAGxBZ,EAAiBK,GAAmB,IACpCR,EAAiB,WAEpBkB,MAAMC,IACHhB,EAAiB,IACjBH,EAAiB,SACjBF,IAAc,IAAIsB,EAAmB,QAASD,OAEvD,IAEI,CAAEjB,gBAAeH,gBAC5B"}