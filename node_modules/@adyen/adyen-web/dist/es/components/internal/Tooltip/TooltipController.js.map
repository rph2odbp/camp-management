{"version":3,"file":"TooltipController.js","sources":["../../../../../src/components/internal/Tooltip/TooltipController.ts"],"sourcesContent":["import { TooltipProps } from './types';\nimport { getUniqueId } from '../../../utils/idGenerator';\n\ntype setTooltipState = (state: TooltipProps | null) => void;\n\nexport class TooltipController {\n    public static readonly tooltipId = getUniqueId('adyen-checkout-tooltip');\n    private static readonly DEFAULT_TIMEOUT = 100;\n    private static readonly PRIMARY_TOOLTIP_RESET_EVENT = 'primary-tooltip-reset';\n    private static timeoutId: ReturnType<typeof setTimeout> | null = null;\n    private static registered = false;\n    private static updateGlobalTooltip: setTooltipState = () => {};\n    private static eventTarget = new EventTarget();\n\n    public static registerTooltipHandler(fn: setTooltipState): void {\n        this.updateGlobalTooltip = fn;\n        this.registered = true;\n    }\n\n    public static canRegisterTooltipHandler(): boolean {\n        return !this.registered;\n    }\n\n    public static showTooltip(state?: TooltipProps) {\n        clearTimeout(this.timeoutId);\n        this.timeoutId = setTimeout(() => this.updateGlobalTooltip({ ...state, visible: true }), this.DEFAULT_TIMEOUT);\n    }\n\n    public static hideTooltip(state?: TooltipProps) {\n        clearTimeout(this.timeoutId);\n        this.timeoutId = setTimeout(() => this.updateGlobalTooltip({ ...state, visible: false }), this.DEFAULT_TIMEOUT);\n    }\n\n    public static reset() {\n        this.registered = false;\n        this.updateGlobalTooltip = () => {};\n        this.notifyPrimaryReset();\n    }\n\n    private static notifyPrimaryReset() {\n        this.eventTarget.dispatchEvent(new Event(TooltipController.PRIMARY_TOOLTIP_RESET_EVENT));\n    }\n\n    public static onPrimaryReset(callback: () => void) {\n        this.eventTarget.addEventListener(TooltipController.PRIMARY_TOOLTIP_RESET_EVENT, callback);\n        return () => this.eventTarget.removeEventListener(TooltipController.PRIMARY_TOOLTIP_RESET_EVENT, callback);\n    }\n}\n"],"names":["TooltipController","registerTooltipHandler","fn","this","updateGlobalTooltip","registered","canRegisterTooltipHandler","showTooltip","state","clearTimeout","timeoutId","setTimeout","visible","DEFAULT_TIMEOUT","hideTooltip","reset","notifyPrimaryReset","eventTarget","dispatchEvent","Event","PRIMARY_TOOLTIP_RESET_EVENT","onPrimaryReset","callback","addEventListener","removeEventListener","_define_property","tooltipId","getUniqueId","EventTarget"],"mappings":"oLAKO,MAAMA,EAST,6BAAcC,CAAuBC,GACjCC,KAAKC,oBAAsBF,EAC3BC,KAAKE,YAAa,CACtB,CAEA,gCAAcC,GACV,OAAQH,KAAKE,UACjB,CAEA,kBAAcE,CAAYC,GACtBC,aAAaN,KAAKO,WAClBP,KAAKO,UAAYC,WAAW,IAAMR,KAAKC,oBAAoB,IAAKI,EAAOI,SAAS,IAAST,KAAKU,gBAClG,CAEA,kBAAcC,CAAYN,GACtBC,aAAaN,KAAKO,WAClBP,KAAKO,UAAYC,WAAW,IAAMR,KAAKC,oBAAoB,IAAKI,EAAOI,SAAS,IAAUT,KAAKU,gBACnG,CAEA,YAAcE,GACVZ,KAAKE,YAAa,EAClBF,KAAKC,oBAAsB,OAC3BD,KAAKa,oBACT,CAEA,yBAAeA,GACXb,KAAKc,YAAYC,cAAc,IAAIC,MAAMnB,EAAkBoB,6BAC/D,CAEA,qBAAcC,CAAeC,GAEzB,OADAnB,KAAKc,YAAYM,iBAAiBvB,EAAkBoB,4BAA6BE,GAC1E,IAAMnB,KAAKc,YAAYO,oBAAoBxB,EAAkBoB,4BAA6BE,EACrG,EAxCAG,EADSzB,EACc0B,YAAYC,EAAY,2BAC/CF,EAFSzB,EAEea,kBAAkB,KAC1CY,EAHSzB,EAGeoB,8BAA8B,yBACtDK,EAJSzB,EAIMU,YAAkD,MACjEe,EALSzB,EAKMK,cAAa,GAC5BoB,EANSzB,EAMMI,sBAAuC,QACtDqB,EAPSzB,EAOMiB,cAAc,IAAIW"}