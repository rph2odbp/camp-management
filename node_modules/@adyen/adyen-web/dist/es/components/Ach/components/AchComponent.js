import{createElement as e}from"../../../external/preact/dist/preact.js";import{useMemo as r,useState as o,useRef as t,useEffect as a,useCallback as n}from"../../../external/preact/hooks/dist/hooks.js";import{useCoreContext as i}from"../../../core/Context/CoreProvider.js";import c from"../../internal/FormInstruction/FormInstruction.js";import{AccountTypeSelector as u}from"./AccountTypeSelector.js";import s from"../../internal/FormFields/Fieldset/Fieldset.js";import l from"../../../utils/useForm/useForm.js";import m from"../../internal/FormFields/Field/Field.js";import d from"../../internal/FormFields/InputText.js";import{achValidationRules as b,achFormatters as N}from"./validate.js";import p from"../../internal/StoreDetails/StoreDetails.js";import g from"./useSRPanelForACHErrors.js";import f from"../../../core/Context/useImage.js";import{PREFIX as h}from"../../internal/Icon/constants.js";function V({onChange:V,payButton:F,showPayButton:M,placeholders:j,hasHolderName:y,setComponentRef:w,enableStoreDetails:A}){const v=f(),x=r(()=>["selectedAccountType","routingNumber","accountNumber","accountNumberVerification",...y?["ownerName"]:[]],[y]),{i18n:C}=i(),[I,S]=o("ready"),{handleChangeFor:T,triggerValidation:k,data:B,errors:q,valid:P,isValid:D}=l({schema:x,rules:b,formatters:N}),[E,H]=o(!1),R="loading"===I,_=t(!1),$=t({setStatus:S,showValidation:()=>{_.current=!0,k()}});a(()=>{w($.current)},[w,$.current]),g({errors:q,data:B,isValidating:_}),a(()=>{V({data:B,valid:P,errors:q,isValid:D,storePaymentMethod:E})},[V,B,P,q,D,E]);const z=n(e=>{T("accountNumber","input")(e);!!q.accountNumberVerification&&k(["accountNumberVerification"])},[T,k,B.accountNumberVerification,q.accountNumberVerification]);return e("div",{className:"adyen-checkout__ach"},e(c,null),e(s,{classNameModifiers:[],label:C.get("ach.bankAccount.title")},e(u,{placeholder:j?.accountTypeSelector,onSelect:T("selectedAccountType"),selectedAccountType:B.selectedAccountType,disabled:R,errorMessage:!!q.selectedAccountType&&C.get(q.selectedAccountType.errorMessage)}),y&&e(m,{label:C.get("ach.accountHolderNameField.title"),errorMessage:!!q.ownerName&&C.get(q.ownerName.errorMessage),isValid:!!P.ownerName,name:"ownerName"},e(d,{disabled:R,name:"ownerName",placeholder:j?.ownerName,value:B.ownerName,onInput:T("ownerName","input"),onBlur:T("ownerName","blur"),required:!0})),e(m,{label:C.get("ach.routingNumber.label"),classNameModifiers:["col-60"],errorMessage:!!q.routingNumber&&C.get(q.routingNumber.errorMessage),name:"routingNumber",isValid:!!P.routingNumber},e(d,{disabled:R,name:"routingNumber",placeholder:j?.routingNumber,value:B.routingNumber,onInput:T("routingNumber","input"),onBlur:T("routingNumber","blur"),required:!0,maxlength:9})),e(m,{label:C.get("ach.bankAccountNumber.label"),classNameModifiers:["col-40"],errorMessage:!!q.accountNumber&&C.get(q.accountNumber.errorMessage),isValid:!!P.accountNumber,name:"accountNumber"},e(d,{disabled:R,name:"accountNumber",placeholder:j?.accountNumber,value:B.accountNumber,onInput:z,onBlur:T("accountNumber","blur"),required:!0,maxlength:17})),e(m,{label:C.get("ach.bankAccountNumberVerification.label"),errorMessage:!!q.accountNumberVerification&&C.get(q.accountNumberVerification.errorMessage),name:"accountNumberVerification",isValid:!!P.accountNumberVerification},e(d,{disabled:R,name:"accountNumberVerification",placeholder:j?.accountNumberVerification,value:B.accountNumberVerification,onInput:T("accountNumberVerification","input"),onBlur:T("accountNumberVerification","blur"),required:!0,maxlength:17}))),A&&e(p,{disabled:R,onChange:H}),M&&F({status:I,icon:v({imageFolder:"components/"})(`${h}lock`)}))}export{V as default};
//# sourceMappingURL=AchComponent.js.map
