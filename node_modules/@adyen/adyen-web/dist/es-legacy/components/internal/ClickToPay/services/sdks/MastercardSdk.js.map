{"version":3,"file":"MastercardSdk.js","sources":["../../../../../../../src/components/internal/ClickToPay/services/sdks/MastercardSdk.ts"],"sourcesContent":["import { getMastercardSettings, MC_SDK_PROD, MC_SDK_TEST } from './config';\nimport AbstractSrcInitiator from './AbstractSrcInitiator';\nimport SrciError, { MastercardError, VisaError } from './SrciError';\nimport {\n    CustomSdkConfiguration,\n    SrciCompleteIdentityValidationResponse,\n    SrcIdentityLookupParams,\n    SrciIdentityLookupResponse,\n    SrcInitParams\n} from './types';\n\nconst IdentityTypeMap = {\n    email: 'EMAIL_ADDRESS',\n    telephoneNumber: 'MOBILE_PHONE_NUMBER'\n};\n\nclass MastercardSdk extends AbstractSrcInitiator {\n    public readonly schemeName = 'mc';\n\n    constructor(environment: string, customSdkConfig: CustomSdkConfiguration) {\n        super(environment.toLowerCase().includes('live') ? MC_SDK_PROD : MC_SDK_TEST, customSdkConfig);\n    }\n\n    protected isSdkIsAvailableOnWindow(): boolean {\n        // @ts-ignore SRCSDK_MASTERCARD is created by the MC sdk\n        if (window.SRCSDK_MASTERCARD) return true;\n        return false;\n    }\n\n    protected assignSdkReference(): void {\n        // @ts-ignore SRCSDK_MASTERCARD is created by the MC sdk\n        this.schemeSdk = window.SRCSDK_MASTERCARD;\n    }\n\n    public async init(params: SrcInitParams, srciTransactionId: string): Promise<void> {\n        try {\n            const sdkProps = {\n                ...params,\n                ...getMastercardSettings(this.customSdkConfiguration),\n                srciTransactionId\n            };\n            await this.schemeSdk.init(sdkProps);\n        } catch (err) {\n            const srciError = new SrciError(err as VisaError | MastercardError, 'init', this.schemeName);\n            throw srciError;\n        }\n    }\n\n    public async identityLookup({ identityValue, type }: SrcIdentityLookupParams): Promise<SrciIdentityLookupResponse> {\n        try {\n            const consumerIdentity = {\n                identityValue,\n                identityType: IdentityTypeMap[type]\n            };\n\n            const response = await this.schemeSdk.identityLookup({ consumerIdentity });\n            return response;\n        } catch (err) {\n            const srciError = new SrciError(err as VisaError | MastercardError, 'identityLookup', this.schemeName);\n            throw srciError;\n        }\n    }\n\n    public async completeIdentityValidation(otp: string): Promise<SrciCompleteIdentityValidationResponse> {\n        try {\n            const response = await this.schemeSdk.completeIdentityValidation({ validationData: otp });\n            return response;\n        } catch (err) {\n            const srciError = new SrciError(err as VisaError | MastercardError, 'completeIdentityValidation', this.schemeName);\n            throw srciError;\n        }\n    }\n}\n\nexport default MastercardSdk;\n"],"names":["IdentityTypeMap","email","telephoneNumber","MastercardSdk","AbstractSrcInitiator","isSdkIsAvailableOnWindow","window","SRCSDK_MASTERCARD","assignSdkReference","this","schemeSdk","init","params","srciTransactionId","sdkProps","_object_spread_props","_object_spread","getMastercardSettings","customSdkConfiguration","err","SrciError","schemeName","identityLookup","identityValue","type","consumerIdentity","identityType","completeIdentityValidation","otp","validationData","constructor","environment","customSdkConfig","super","toLowerCase","includes","MC_SDK_PROD","MC_SDK_TEST","_define_property"],"mappings":"koBAWA,MAAMA,EAAkB,CACpBC,MAAO,gBACPC,gBAAiB,uBAGrB,MAAMC,UAAsBC,EAOdC,wBAAAA,GAEN,QAAIC,OAAOC,iBAEf,CAEUC,kBAAAA,GAENC,KAAKC,UAAYJ,OAAOC,iBAC5B,CAEA,UAAaI,CAAKC,EAAuBC,GACrC,IACI,MAAMC,EAAWC,oUAAAC,CAAA,CAAA,EACVJ,EACAK,EAAsBR,KAAKS,yBAAsB,CACpDL,4BAEEJ,KAAKC,UAAUC,KAAKG,EAC9B,CAAE,MAAOK,GAEL,MADkB,IAAIC,EAAUD,EAAoC,OAAQV,KAAKY,WAErF,CACJ,CAEA,oBAAaC,EAAeC,cAAEA,EAAaC,KAAEA,IACzC,IACI,MAAMC,EAAmB,CACrBF,gBACAG,aAAc1B,EAAgBwB,IAIlC,aADuBf,KAAKC,UAAUY,eAAe,CAAEG,oBAE3D,CAAE,MAAON,GAEL,MADkB,IAAIC,EAAUD,EAAoC,iBAAkBV,KAAKY,WAE/F,CACJ,CAEA,gCAAaM,CAA2BC,GACpC,IAEI,aADuBnB,KAAKC,UAAUiB,2BAA2B,CAAEE,eAAgBD,GAEvF,CAAE,MAAOT,GAEL,MADkB,IAAIC,EAAUD,EAAoC,6BAA8BV,KAAKY,WAE3G,CACJ,CApDA,WAAAS,CAAYC,EAAqBC,GAC7BC,MAAMF,EAAYG,cAAcC,SAAS,QAAUC,EAAcC,EAAaL,GAHlFM,EAAA7B,KAAgBY,aAAa,KAI7B"}