{"version":3,"file":"TooltipController.js","sources":["../../../../../src/components/internal/Tooltip/TooltipController.ts"],"sourcesContent":["import { TooltipProps } from './types';\nimport { getUniqueId } from '../../../utils/idGenerator';\n\ntype setTooltipState = (state: TooltipProps | null) => void;\n\nexport class TooltipController {\n    public static readonly tooltipId = getUniqueId('adyen-checkout-tooltip');\n    private static readonly DEFAULT_TIMEOUT = 100;\n    private static readonly PRIMARY_TOOLTIP_RESET_EVENT = 'primary-tooltip-reset';\n    private static timeoutId: ReturnType<typeof setTimeout> | null = null;\n    private static registered = false;\n    private static updateGlobalTooltip: setTooltipState = () => {};\n    private static eventTarget = new EventTarget();\n\n    public static registerTooltipHandler(fn: setTooltipState): void {\n        this.updateGlobalTooltip = fn;\n        this.registered = true;\n    }\n\n    public static canRegisterTooltipHandler(): boolean {\n        return !this.registered;\n    }\n\n    public static showTooltip(state?: TooltipProps) {\n        clearTimeout(this.timeoutId);\n        this.timeoutId = setTimeout(() => this.updateGlobalTooltip({ ...state, visible: true }), this.DEFAULT_TIMEOUT);\n    }\n\n    public static hideTooltip(state?: TooltipProps) {\n        clearTimeout(this.timeoutId);\n        this.timeoutId = setTimeout(() => this.updateGlobalTooltip({ ...state, visible: false }), this.DEFAULT_TIMEOUT);\n    }\n\n    public static reset() {\n        this.registered = false;\n        this.updateGlobalTooltip = () => {};\n        this.notifyPrimaryReset();\n    }\n\n    private static notifyPrimaryReset() {\n        this.eventTarget.dispatchEvent(new Event(TooltipController.PRIMARY_TOOLTIP_RESET_EVENT));\n    }\n\n    public static onPrimaryReset(callback: () => void) {\n        this.eventTarget.addEventListener(TooltipController.PRIMARY_TOOLTIP_RESET_EVENT, callback);\n        return () => this.eventTarget.removeEventListener(TooltipController.PRIMARY_TOOLTIP_RESET_EVENT, callback);\n    }\n}\n"],"names":["TooltipController","registerTooltipHandler","fn","this","updateGlobalTooltip","registered","canRegisterTooltipHandler","showTooltip","state","clearTimeout","timeoutId","setTimeout","_object_spread_props","_object_spread","visible","DEFAULT_TIMEOUT","hideTooltip","reset","notifyPrimaryReset","eventTarget","dispatchEvent","Event","PRIMARY_TOOLTIP_RESET_EVENT","onPrimaryReset","callback","addEventListener","removeEventListener","_define_property","tooltipId","getUniqueId","EventTarget"],"mappings":"q2BAKO,MAAMA,EAST,6BAAcC,CAAuBC,GACjCC,KAAKC,oBAAsBF,EAC3BC,KAAKE,YAAa,CACtB,CAEA,gCAAcC,GACV,OAAQH,KAAKE,UACjB,CAEA,kBAAcE,CAAYC,GACtBC,aAAaN,KAAKO,WAClBP,KAAKO,UAAYC,WAAW,IAAMR,KAAKC,oBAAoBQ,EAAAC,EAAA,GAAKL,GAAAA,CAAOM,SAAS,KAASX,KAAKY,gBAClG,CAEA,kBAAcC,CAAYR,GACtBC,aAAaN,KAAKO,WAClBP,KAAKO,UAAYC,WAAW,IAAMR,KAAKC,oBAAoBQ,EAAAC,EAAA,GAAKL,GAAAA,CAAOM,SAAS,KAAUX,KAAKY,gBACnG,CAEA,YAAcE,GACVd,KAAKE,YAAa,EAClBF,KAAKC,oBAAsB,OAC3BD,KAAKe,oBACT,CAEA,yBAAeA,GACXf,KAAKgB,YAAYC,cAAc,IAAIC,MAAMrB,EAAkBsB,6BAC/D,CAEA,qBAAcC,CAAeC,GAEzB,OADArB,KAAKgB,YAAYM,iBAAiBzB,EAAkBsB,4BAA6BE,GAC1E,IAAMrB,KAAKgB,YAAYO,oBAAoB1B,EAAkBsB,4BAA6BE,EACrG,EAxCAG,EADS3B,EACc4B,YAAYC,EAAY,2BAC/CF,EAFS3B,EAEee,kBAAkB,KAC1CY,EAHS3B,EAGesB,8BAA8B,yBACtDK,EAJS3B,EAIMU,YAAkD,MACjEiB,EALS3B,EAKMK,cAAa,GAC5BsB,EANS3B,EAMMI,sBAAuC,QACtDuB,EAPS3B,EAOMmB,cAAc,IAAIW"}