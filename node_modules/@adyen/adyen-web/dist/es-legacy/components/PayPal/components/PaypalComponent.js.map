{"version":3,"file":"PaypalComponent.js","sources":["../../../../../src/components/PayPal/components/PaypalComponent.tsx"],"sourcesContent":["import { h } from 'preact';\nimport { useState, useEffect, useCallback } from 'preact/hooks';\nimport PaypalButtons from './PaypalButtons';\nimport Spinner from '../../internal/Spinner';\nimport { getPaypalUrl } from '../utils/get-paypal-url';\nimport Script from '../../../utils/Script';\nimport AdyenCheckoutError from '../../../core/Errors/AdyenCheckoutError';\nimport type { PayPalComponentProps } from './types';\n\nexport default function PaypalComponent({ onApprove, onCancel, onChange, onError, onSubmit, onScriptLoadFailure, ...props }: PayPalComponentProps) {\n    const [status, setStatus] = useState('pending');\n\n    this.setStatus = setStatus;\n\n    const handleOnApprove = useCallback(\n        (data: any, actions: any) => {\n            setStatus('processing');\n            onApprove(data, actions);\n        },\n        [onApprove]\n    );\n\n    const handlePaypalLoad = () => {\n        setStatus('ready');\n    };\n\n    const handlePaypalLoadFailure = (error: AdyenCheckoutError) => {\n        onScriptLoadFailure(error);\n    };\n\n    useEffect(() => {\n        const src = getPaypalUrl(props);\n\n        const attributes = { ...(props.cspNonce && { nonce: props.cspNonce }) },\n            dataAttributes = { ...(props.cspNonce && { cspNonce: props.cspNonce }) };\n\n        const script = new Script(src, 'body', attributes, dataAttributes);\n\n        script.load().then(handlePaypalLoad).catch(handlePaypalLoadFailure);\n\n        return () => {\n            script.remove();\n        };\n    }, []);\n\n    if (status === 'pending') {\n        return (\n            <div className=\"adyen-checkout__paypal\" aria-live=\"polite\" aria-busy=\"true\">\n                <div className=\"adyen-checkout__paypal__status adyen-checkout__paypal__status--pending\" data-testid={'paypal-loader'}>\n                    <Spinner />\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"adyen-checkout__paypal\">\n            <PaypalButtons\n                {...props}\n                onCancel={onCancel}\n                onChange={onChange}\n                onError={onError}\n                onSubmit={onSubmit}\n                onApprove={handleOnApprove}\n                isProcessingPayment={status === 'processing'}\n                paypalRef={window.paypal}\n            />\n        </div>\n    );\n}\n"],"names":["PaypalComponent","_param","onApprove","onCancel","onChange","onError","onSubmit","onScriptLoadFailure","props","status","setStatus","useState","this","handleOnApprove","useCallback","data","actions","handlePaypalLoad","handlePaypalLoadFailure","error","useEffect","src","getPaypalUrl","attributes","_object_spread","cspNonce","nonce","dataAttributes","script","Script","load","then","catch","remove","h","div","className","aria-live","aria-busy","data-testid","Spinner","PaypalButtons","isProcessingPayment","paypalRef","window","paypal"],"mappings":"kgDASe,SAASA,EAAgBC,GAAA,IAAAC,UAAEA,EAASC,SAAEA,EAAQC,SAAEA,EAAQC,QAAEA,EAAOC,SAAEA,EAAQC,oBAAEA,GAApDN,EAA4EO,EAAAA,EAA5EP,EAAA,CAAEC,YAAWC,WAAUC,WAAUC,UAASC,WAAUC,wBACxF,MAAOE,EAAQC,GAAaC,EAAS,WAErCC,KAAKF,UAAYA,EAEjB,MAAMG,EAAkBC,EACpB,CAACC,EAAWC,KACRN,EAAU,cACVR,EAAUa,EAAMC,IAEpB,CAACd,IAGCe,EAAmB,KACrBP,EAAU,UAGRQ,EAA2BC,IAC7BZ,EAAoBY,IAkBxB,OAfAC,EAAU,KACN,MAAMC,EAAMC,EAAad,GAEnBe,EAAaC,EAAA,GAAMhB,EAAMiB,UAAY,CAAEC,MAAOlB,EAAMiB,WACtDE,EAAiBH,EAAA,CAAA,EAAMhB,EAAMiB,UAAY,CAAEA,SAAUjB,EAAMiB,WAEzDG,EAAS,IAAIC,EAAOR,EAAK,OAAQE,EAAYI,GAInD,OAFAC,EAAOE,OAAOC,KAAKd,GAAkBe,MAAMd,GAEpC,KACHU,EAAOK,WAEZ,IAEY,YAAXxB,EAEIyB,EAACC,MAAAA,CAAIC,UAAU,yBAAyBC,YAAU,SAASC,YAAU,QACjEJ,EAACC,MAAAA,CAAIC,UAAU,yEAAyEG,cAAa,iBACjGL,EAACM,EAAAA,QAObN,EAACC,MAAAA,CAAIC,UAAU,0BACXF,EAACO,EAAAA,EAAAA,EAAAA,CAAAA,EACOjC,GAAAA,CACJL,SAAUA,EACVC,SAAUA,EACVC,QAASA,EACTC,SAAUA,EACVJ,UAAWW,EACX6B,oBAAgC,eAAXjC,EACrBkC,UAAWC,OAAOC,UAIlC"}