import{createElement as e,Fragment as t}from"../../../../external/preact/dist/preact.js";import{useState as n,useCallback as o,useEffect as a}from"../../../../external/preact/hooks/dist/hooks.js";import r from"../VpaInput/VpaInput.js";import i from"../../../../core/Context/useImage.js";import{A11Y as l}from"../../constants.js";import s from"../../../internal/SegmentedControl/SegmentedControl.js";import d from"../UPIIntentAppList/UPIIntentAppList.js";import{useCoreContext as c}from"../../../../core/Context/CoreProvider.js";import u from"../../../internal/Alert/Alert.js";function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){p(e,t,n[t])})}return e}function g({defaultMode:p,onChange:g,onUpdateMode:b=()=>{},payButton:f,showPayButton:y,apps:h=[],segmentedControlOptions:I=[]}){const{i18n:C}=c(),j=i(),[v,A]=n("ready"),[N,k]=n(p),[P,S]=n(null),[O,V]=n(null),[q,w]=n("qrCode"===p);this.setStatus=e=>{A(e)},this.showValidation=()=>{null==P||P.validateInput(),"intent"===N&&T()};const x=o(e=>{S(e)},[]),B=o(e=>{k(e),b(e)},[b]),E=o(e=>{(null==e?void 0:e.id)!==(null==O?void 0:O.id)&&(V(e),w(!0),A("ready"))},[O]),T=o(()=>{O?(A("ready"),w(!0)):(A("error"),w(!1))},[O]);return a(()=>{g("qrCode"!==N?{data:m({},O&&{app:O}),isValid:q}:{data:{},valid:{},errors:{},isValid:!0})},[O,q,N,g]),e(t,null,I.length>0&&e("p",{className:"adyen-checkout_upi-mode-selection-text"},C.get("upi.modeSelection")),e(s,{onChange:B,selectedValue:N,disabled:"loading"===v,classNameModifiers:["upi-margin-bottom"],options:I}),"intent"===N&&e("div",{id:l.AreaId.INTENT,"aria-labelledby":l.ButtonId.INTENT,className:"adyen-checkout-upi-area-intent",role:"region"},e("span",{className:"adyen-checkout-upi-instruction-label"},C.get("upi.intent.instruction")),"error"===v&&e(u,{icon:"cross"},C.get("upi.error.noAppSelected")),e(d,{disabled:"loading"===v,apps:h,selectedAppId:null==O?void 0:O.id,onAppSelect:E}),y&&f({label:C.get("continue"),status:v})),"vpa"===N&&e("div",{id:l.AreaId.VPA,"aria-labelledby":l.ButtonId.VPA,className:"adyen-checkout-upi-area-vpa",role:"region"},e("span",{className:"adyen-checkout-upi-instruction-label"},C.get("upi.collect.instruction")),e(r,{disabled:"loading"===v,onChange:g,onSetInputHandlers:x}),y&&f({label:C.get("continue"),status:v})),"qrCode"===N&&e("div",{id:l.AreaId.QR,"aria-labelledby":l.ButtonId.QR,className:"adyen-checkout-upi-area-qr-code",role:"region"},e("span",{className:"adyen-checkout-upi-instruction-label"},C.get("upi.qrCode.instruction")),y&&f({label:C.get("generateQRCode"),icon:j({imageFolder:"components/"})("qr"),status:v})))}export{g as default};
//# sourceMappingURL=UPIComponent.js.map
